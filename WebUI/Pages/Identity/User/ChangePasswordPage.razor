@page "/changePassword"
@using WebUI.ServicesModel.Identity
@layout EmptyLayout

<div class="col-lg-6 offset-lg-3 d-flex p-3">
    <RadzenCard class="d-flex m-5 p-0 rz-border-radius-4 rz-shadow-10" Style="width: 100%; flex-direction: column; overflow: hidden; align-items: stretch;">
        <RadzenCard Class="rz-shadow-0 rz-border-radius-0 rz-background-color-info p-5" style="text-align: center;">
            <RadzenText TextStyle="TextStyle.DisplayH3" TagName="TagName.H2" Class="rz-color-white mb-0">Смяна на парола</RadzenText>
        </RadzenCard>
        <RadzenCard Class="rz-shadow-0 p-5">
            <RadzenTemplateForm TItem="ChangePasswordModel" Data=@ChangePasswordModel Submit=@OnSubmit>
                <RadzenStack>
                    <RadzenFormField Text="Стара парола" Variant="Variant.Filled">
                        <ChildContent>
                            <RadzenPassword style="display: block; width: 100%" Name="CurrentPassword" @bind-Value=@ChangePasswordModel.CurrentPassword />
                        </ChildContent>
                        <Helper>
                            <RadzenRequiredValidator Component="CurrentPassword" Text="Въведете старата парола" Style="position: absolute" />
                        </Helper>
                    </RadzenFormField>
                    <RadzenFormField Text="Нова парола" Variant="Variant.Filled">
                        <ChildContent>
                            <RadzenPassword style="display: block; width: 100%" Name="NewPassword" @bind-Value=@ChangePasswordModel.NewPassword />
                        </ChildContent>
                        <Helper>
                            <RadzenRequiredValidator Component="NewPassword" Text="Въведете нова парола" Style="position: absolute" />
                        </Helper>
                    </RadzenFormField>
                    <RadzenFormField Text="Повтори новата парола" Variant="Variant.Filled">
                        <ChildContent>
                            <RadzenPassword style="display: block; width: 100%" Name="RepeatPassword" @bind-Value=@ChangePasswordModel.RepeatPassword />
                        </ChildContent>
                        <Helper>
                            <RadzenRequiredValidator Component="RepeatPassword" Text="Повторете новата си парола" Style="position: absolute" />
                            <RadzenCompareValidator Visible=@(!string.IsNullOrEmpty(ChangePasswordModel.RepeatPassword))
                                                    Value=@ChangePasswordModel.NewPassword
                                                    Component="RepeatPassword"
                                                    Text="Паролите трябва да са еднакви"
                                                    Style="position: absolute" />
                        </Helper>
                    </RadzenFormField>
                </RadzenStack>
                <RadzenStack style="margin-top:1rem;" Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" JustifyContent="JustifyContent.End" Gap="0.5rem">
                    <RadzenButton ButtonStyle="ButtonStyle.Primary" ButtonType="ButtonType.Submit" Icon="save" Text="Изпрати" Variant="Variant.Flat" />
                    <RadzenButton ButtonStyle="ButtonStyle.Light" Text="Назад" Variant="Variant.Flat" Click=@OnClose />
                </RadzenStack>
            </RadzenTemplateForm>
        </RadzenCard>
    </RadzenCard>
</div>